
# 文件系统
## 第一节 文件权限概念
### 文件属性 -- ls -al

<image url="./imgs/ls.png"/>

![](./imgs/ls.png)

##### 第一列表示 文件类型：

###### 第一个字符
* d 开头表示 文件夹、目录
*  \- 开头表示 文件
* l  => link 文件
* b  =》 可储存的接口设备
* c  =》 串行端口

###### 第一列剩下的 三个为一组，表示权限

> r => read;  w => write;  x => execute;  ‘-’ => 没有权限

* 第一组： 文件所有者权限
* 第二组：  同同用户组权限
* 第三组：  其他非本用户组的权限

##### 第二列 连接到此文件的连接数

##### 第三列 该目录/文件 的所有者
##### 第四列 该目录所属用户组
##### 第五列 文件容量大小： 默认单位为 B
##### 第六列 创建日期或修改日期
日期如果太久远，会只显示年份；
若要显示完整日期格式，添加参数： 
```
ls -l --full-time
```

##### 第七列 文件名
> 若文件名以 “.” 开头，表示隐藏文件


### 修改文件属性域权限

#### chgrp
> change group 修改所属用户组
参数 -R ： 递归调用，连同修改子目录

```
chgrp [R] dirname/filename
```

#### chown
> cahnge owner 修改所有者
```
chown [R] dirname/filename
```

#### chmod

> 改变权限。共有两种方式

##### 以数字方式：

* rwx => 4-2-1 => 7
* r-x => 4-0-1 => 5
* ...
```
chmod [R] xyz dirname/filename 
```
##### 以符号类型：
```
chmod u=rwx, g=rx, o=rx

//也可合并：
//chmod u=rwx, go=rx
```

如果不知道原来的类型，只想在原来基础上添加或减少,用 ‘+、-’

```example
chmod a-x .bashrc
```

### 目录与文件权限的意义
##### 对于文件
> r => read; 

>w => write; 包含编辑、新增、修改文件内容，但不包括删除

>x => excute; 执行该文件

##### 对于目录
> r => 读取目录结构列表， 可以用 `ls`

> w => 新建、删除目录或文件， 重命名， 转移目录内容、位置

> x => 目录不能执行， x 代表用户能否进入该目录成为工作目录（cd 进入该目录）

### Linux 文件种类与扩展名

#### 文件种类

* 普通文件 regular file
* 纯文本文件 ASCLL
* 二进制文件 binary
* 数据格式文件 data
* 目录 directory
* 连接文件 link
* 设备、设备文件 device
* 套接字 socket
* 管道 pipe （FIFO： first in first out）

#### 扩展名
> linux 文件能不能被执行，与他的第一列第十个属性有关，与文件名没有关系
而在 Windows 下，能被执行的文件扩展名通常是 .com/.exe/.bat/...

* 可以被执行 和 能执行成功不一样。因为可以修改 `x` 属性

##### 常用扩展名
* `*.sh` 脚本、批处理文件（scripts）
* `Z`  `*.tar`  `*.tar.gz`  `*.zip`  `*.tgz`  压缩文件
* `.html`  `.php` 网页相关文件

#### 长度限制

> 默认的文件系统，文件名长度限制：
* 单一文件或目录最大文件名为 255 字符
* 完整文件或目录最大为 4096 字符

### 第二节 目录配置

#### Linux 目录配置标准
###### 四个类型
* 可分享的  包括执行文件与用户的邮件等等
* 不可分享的  自己机器上的备份文件或是与程序相关的socket等等
* 不变的  函数库、文件说明库
* 可变的  登录文件、新闻组等

###### 三个目录
* / (root, 根目录) 与开关机有关 
* /usr (Unix software resource)  与软件安装、执行有关
* /var (variable)  与操作系统运作有关

##### 根目录的意义与内容
##### usr
##### var   //先略过

#### 相对路径与绝对路径
> 由 `/` （根目录）开头的路径

> 由 `./` 、`../` 开头的相对路径

#### CentOS 的查看
查看 Linux 内核的命令
```js
uname -r
//查看实际的内核版本
```

### 文件内容的查阅
#### 直接查看文件内容
###### cat （concatenate: 连续）
参数：
* `-A`
* `-b`
* `-E`
* `-n`
* `-T`
* `-v`

###### tac (cat 的反向，从最后一行开始输出)
###### nl （略）

#### 翻页查看
###### more
```
more /etc/man.config
```
#### 数据选取
###### head
> 取出前面几行。
参数：
* `-n` 后面接数字，表示几行
```
head -n 20 filename
```

###### tail
> 取出后几行
```
tail -n 20 filename
```

#### 非纯文本文件： od
> 前面命令读取二进制文件会乱码，但是可以用 `od` 这个命令

参数： 
* `-t` type, 后面接各种类型的输出： a => 默认字符； c => ascll字符输出； d、f、o、x=> 十进制、浮点数、八进制、十六进制

#### 修改文件时间或创建新文件： touch
> 每个linux 文件会有三个时间
* modification time （mtime）  更改内容的时间
* status time   （ctime）文件权限和属性改变的时间
* access time   （atime）文件被读取的时间

```
ls -l filename
ls -l --time=atime filename
ls -l --time=ctime filename
```
###### touch
参数：
* `-a` 仅修改访问时间
* `-c` 仅修改访问时间、若文件不存在不创建新文件
* `-m` 仅修改mtime
* `-t` 修改时间，格式为[YYMMDDhhmm]

### 文件目录的默认权限与隐藏权限
#### 文件默认权限: umask
> 新建一个文件或目录时，他的默认权限会是什么呢？
```
umask
//结果：
shichaodeAir:testPic lovae$ umask
0022            //一般与权限有关的是后三位
shichaodeAir:testPic lovae$ umask -S
u=rwx,g=rx,o=rx
```
> 若创建了一个文件，则默认没有可执行权限（x），也就是最大为666，默认如下：
```
-rw-rw-rw-
```
> 若创建目录，x与是否可进入此目录，因此所有权限开放，rux：
```dart
drwxrwxrwx
```

#### 文件隐藏属性 chattr、 lsattr
> chattr 设置文件隐藏属性
```
chattr [+-=] [ASacdistu] fileName
```

参数：
* `+` => 增加
* `-` => 删除
* `=` => 赋值
* `A` => 设置了这个属性，文件的`atime`不会被修改
* `S` => 同步修改
* `a` => 设置后，只能增加，不能修改和删除数据，只有 root 能设置这个属性
* `c` => 自动将文件压缩，读取的时候解压
* `d` => 。。。
* `i` => 可以让文件不能被删除、改名，设置连接也无法写入或添加数据。只有 root 能设置该属性
* `s` => 当文件被删除，将完全从磁盘中删除
* `u` => 与`s`相反，被删除时，在磁盘中还有备份，可找回

> lsattr 显示隐藏权限
```
lsattr [-adR] filename
```

参数：
* `-a` 将隐藏文件的属性也显示出来
* `-d` 若对目录进行操作，则显示目录本身属性而不是目录内的文件名
* `-R` 连同子目录